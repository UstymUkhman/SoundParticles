{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 21f52680738c63fa9dc1","webpack:///./~/three/examples/js/Detector.js","webpack:///./~/three/examples/js/libs/stats.min.js","webpack:///./~/web-audio-analyser/index.js","webpack:///./src/index.js"],"names":["analyser","require","MAX_DECIBELS","AudioReactive","_startTime","_pauseTime","_isPlaying","_destroyed","_soundSource","_name","_audio","element","webgl","_element","_context","getContext","study","AudioContext","window","webkitAudioContext","audioContext","audioContextAnalyser","createAnalyser","_frequencyRange","frequencyBinCount","_getMaxAudioPower","_experienceStarted","_getAudioValues","_loadAudioTrack","_maxFrequency","_minFrequency","Infinity","_studingAudio","onAudioEnded","_setAudioValues","bind","_onAudioTrackEnded","document","createElement","autoplay","src","addEventListener","loaded","volume","MAX_POWER","SONG_MIN_POWER","SONG_MAX_POWER","SONG_RANGE","_playAudioTrack","play","requestAnimationFrame","_studyAudio","frequency","_getAnalyserFrequencies","Date","now","_render","freq","frequencies","sum","i","length","value","clearRect","_width","_height","h","x","y","fillStyle","fillRect","_drawAudioAnalysis","_getAnalysedValue","max","console","log","stats","body","appendChild","dom","parentNode","removeChild","width","height"],"mappings":"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","file":"AudioReactive.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"AudioReactive\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"AudioReactive\"] = factory();\n\telse\n\t\troot[\"AudioReactive\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 21f52680738c63fa9dc1","/**\n * @author alteredq / http://alteredqualia.com/\n * @author mr.doob / http://mrdoob.com/\n */\n\nvar Detector = {\n\n\tcanvas: !! window.CanvasRenderingContext2D,\n\twebgl: ( function () {\n\n\t\ttry {\n\n\t\t\tvar canvas = document.createElement( 'canvas' ); return !! ( window.WebGLRenderingContext && ( canvas.getContext( 'webgl' ) || canvas.getContext( 'experimental-webgl' ) ) );\n\n\t\t} catch ( e ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t} )(),\n\tworkers: !! window.Worker,\n\tfileapi: window.File && window.FileReader && window.FileList && window.Blob,\n\n\tgetWebGLErrorMessage: function () {\n\n\t\tvar element = document.createElement( 'div' );\n\t\telement.id = 'webgl-error-message';\n\t\telement.style.fontFamily = 'monospace';\n\t\telement.style.fontSize = '13px';\n\t\telement.style.fontWeight = 'normal';\n\t\telement.style.textAlign = 'center';\n\t\telement.style.background = '#fff';\n\t\telement.style.color = '#000';\n\t\telement.style.padding = '1.5em';\n\t\telement.style.width = '400px';\n\t\telement.style.margin = '5em auto 0';\n\n\t\tif ( ! this.webgl ) {\n\n\t\t\telement.innerHTML = window.WebGLRenderingContext ? [\n\t\t\t\t'Your graphics card does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br />',\n\t\t\t\t'Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000\">here</a>.'\n\t\t\t].join( '\\n' ) : [\n\t\t\t\t'Your browser does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br/>',\n\t\t\t\t'Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000\">here</a>.'\n\t\t\t].join( '\\n' );\n\n\t\t}\n\n\t\treturn element;\n\n\t},\n\n\taddGetWebGLMessage: function ( parameters ) {\n\n\t\tvar parent, id, element;\n\n\t\tparameters = parameters || {};\n\n\t\tparent = parameters.parent !== undefined ? parameters.parent : document.body;\n\t\tid = parameters.id !== undefined ? parameters.id : 'oldie';\n\n\t\telement = Detector.getWebGLErrorMessage();\n\t\telement.id = id;\n\n\t\tparent.appendChild( element );\n\n\t}\n\n};\n\n// browserify support\nif ( typeof module === 'object' ) {\n\n\tmodule.exports = Detector;\n\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/three/examples/js/Detector.js\n// module id = 0\n// module chunks = 0","// stats.js - http://github.com/mrdoob/stats.js\nvar Stats=function(){function h(a){c.appendChild(a.dom);return a}function k(a){for(var d=0;d<c.children.length;d++)c.children[d].style.display=d===a?\"block\":\"none\";l=a}var l=0,c=document.createElement(\"div\");c.style.cssText=\"position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000\";c.addEventListener(\"click\",function(a){a.preventDefault();k(++l%c.children.length)},!1);var g=(performance||Date).now(),e=g,a=0,r=h(new Stats.Panel(\"FPS\",\"#0ff\",\"#002\")),f=h(new Stats.Panel(\"MS\",\"#0f0\",\"#020\"));\nif(self.performance&&self.performance.memory)var t=h(new Stats.Panel(\"MB\",\"#f08\",\"#201\"));k(0);return{REVISION:16,dom:c,addPanel:h,showPanel:k,begin:function(){g=(performance||Date).now()},end:function(){a++;var c=(performance||Date).now();f.update(c-g,200);if(c>e+1E3&&(r.update(1E3*a/(c-e),100),e=c,a=0,t)){var d=performance.memory;t.update(d.usedJSHeapSize/1048576,d.jsHeapSizeLimit/1048576)}return c},update:function(){g=this.end()},domElement:c,setMode:k}};\nStats.Panel=function(h,k,l){var c=Infinity,g=0,e=Math.round,a=e(window.devicePixelRatio||1),r=80*a,f=48*a,t=3*a,u=2*a,d=3*a,m=15*a,n=74*a,p=30*a,q=document.createElement(\"canvas\");q.width=r;q.height=f;q.style.cssText=\"width:80px;height:48px\";var b=q.getContext(\"2d\");b.font=\"bold \"+9*a+\"px Helvetica,Arial,sans-serif\";b.textBaseline=\"top\";b.fillStyle=l;b.fillRect(0,0,r,f);b.fillStyle=k;b.fillText(h,t,u);b.fillRect(d,m,n,p);b.fillStyle=l;b.globalAlpha=.9;b.fillRect(d,m,n,p);return{dom:q,update:function(f,\nv){c=Math.min(c,f);g=Math.max(g,f);b.fillStyle=l;b.globalAlpha=1;b.fillRect(0,0,r,m);b.fillStyle=k;b.fillText(e(f)+\" \"+h+\" (\"+e(c)+\"-\"+e(g)+\")\",t,u);b.drawImage(q,d+a,m,n-a,p,d,m,n-a,p);b.fillRect(d+n-a,m,a,p);b.fillStyle=l;b.globalAlpha=.9;b.fillRect(d+n-a,m,a,e((1-f/v)*p))}}};\"object\"===typeof module&&(module.exports=Stats);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/three/examples/js/libs/stats.min.js\n// module id = 1\n// module chunks = 0","var AudioContext = window.AudioContext || window.webkitAudioContext\n\nmodule.exports = WebAudioAnalyser\n\nfunction WebAudioAnalyser(audio, ctx, opts) {\n  if (!(this instanceof WebAudioAnalyser)) return new WebAudioAnalyser(audio, ctx, opts)\n  if (!(ctx instanceof AudioContext)) (opts = ctx), (ctx = null)\n\n  opts = opts || {}\n  this.ctx = ctx = ctx || new AudioContext\n\n  if (!(audio instanceof AudioNode)) {\n    audio = (audio instanceof Audio || audio instanceof HTMLAudioElement)\n      ? ctx.createMediaElementSource(audio)\n      : ctx.createMediaStreamSource(audio)\n  }\n\n  this.analyser = ctx.createAnalyser()\n  this.stereo   = !!opts.stereo\n  this.audible  = opts.audible !== false\n  this.wavedata = null\n  this.freqdata = null\n  this.splitter = null\n  this.merger   = null\n  this.source   = audio\n\n  if (!this.stereo) {\n    this.output = this.source\n    this.source.connect(this.analyser)\n    if (this.audible)\n      this.analyser.connect(ctx.destination)\n  } else {\n    this.analyser = [this.analyser]\n    this.analyser.push(ctx.createAnalyser())\n\n    this.splitter = ctx.createChannelSplitter(2)\n    this.merger   = ctx.createChannelMerger(2)\n    this.output   = this.merger\n\n    this.source.connect(this.splitter)\n\n    for (var i = 0; i < 2; i++) {\n      this.splitter.connect(this.analyser[i], i, 0)\n      this.analyser[i].connect(this.merger, 0, i)\n    }\n\n    if (this.audible)\n      this.merger.connect(ctx.destination)\n  }\n}\n\nWebAudioAnalyser.prototype.waveform = function(output, channel) {\n  if (!output) output = this.wavedata || (\n    this.wavedata = new Uint8Array((this.analyser[0] || this.analyser).frequencyBinCount)\n  )\n\n  var analyser = this.stereo\n    ? this.analyser[channel || 0]\n    : this.analyser\n\n  analyser.getByteTimeDomainData(output)\n\n  return output\n}\n\nWebAudioAnalyser.prototype.frequencies = function(output, channel) {\n  if (!output) output = this.freqdata || (\n    this.freqdata = new Uint8Array((this.analyser[0] || this.analyser).frequencyBinCount)\n  )\n\n  var analyser = this.stereo\n    ? this.analyser[channel || 0]\n    : this.analyser\n\n  analyser.getByteFrequencyData(output)\n\n  return output\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/web-audio-analyser/index.js\n// module id = 2\n// module chunks = 0","import Detector from 'three/examples/js/Detector';\r\nimport Stats from 'three/examples/js/libs/stats.min';\r\n// import { TweenLite } from 'gsap';\r\n\r\nconst analyser = require('web-audio-analyser');\r\nconst MAX_DECIBELS = 255;\r\n\r\n//                             i   Hz        i      Hz          i       Hz\r\n// Theorical Frequency Range: (0 ~ 20) --> (800 ~ 20.000) --> (1024 ~ 25.600)\r\n\r\nexport default class AudioReactive {\r\n\r\n  constructor() {\r\n    this._startTime = null;\r\n    this._pauseTime = null;\r\n\r\n    this._isPlaying = false;\r\n    this._destroyed = false;\r\n\r\n    this._soundSource = null;\r\n\r\n    this._name = 'AudioReactive';\r\n    this._audio = 'John Newman - Love Me Again';\r\n  }\r\n\r\n  init(element) {\r\n    if (!Detector.webgl) {\r\n      return false;\r\n    }\r\n\r\n    this._element = element;\r\n    this._context = this._element.getContext('2d');\r\n\r\n    return true;\r\n  }\r\n\r\n  startExperience(study = false) {\r\n    let AudioContext = window.AudioContext || window.webkitAudioContext;\r\n    let audioContext = new AudioContext();\r\n    let audioContextAnalyser = audioContext.createAnalyser();\r\n\r\n    this._frequencyRange = audioContextAnalyser.frequencyBinCount;\r\n\r\n    this._getMaxAudioPower();\r\n    this._experienceStarted = true;\r\n\r\n    if (study) {\r\n      this._getAudioValues();\r\n    } else {\r\n      this._loadAudioTrack();\r\n    }\r\n  }\r\n\r\n  _getAudioValues() {\r\n    this._maxFrequency = 0;\r\n    this._minFrequency = Infinity;\r\n\r\n    this._studingAudio = true;\r\n    this._loadAudioTrack(true);\r\n  }\r\n\r\n  _loadAudioTrack(study = false) {\r\n    let onAudioEnded = study ? this._setAudioValues.bind(this) : this._onAudioTrackEnded.bind(this);\r\n\r\n    if (this._soundSource === null) {\r\n      this._soundSource = document.createElement('audio');\r\n    }\r\n\r\n    this._soundSource.autoplay = false;\r\n    this._soundSource.src = 'assets/' + this._audio + '.mp3';\r\n    this._soundSource.addEventListener('ended', onAudioEnded);\r\n\r\n    this._soundSource.addEventListener('canplay', () => {\r\n      this._soundSource.loaded = true;\r\n      this._soundSource.volume = 1.0;\r\n\r\n      if (!study) {\r\n        this.MAX_POWER = 7.655;\r\n        this.SONG_MIN_POWER = 510.5 / this.MAX_POWER;\r\n        this.SONG_MAX_POWER = 621.5 / this.MAX_POWER;\r\n        this.SONG_RANGE = this.SONG_MAX_POWER - this.SONG_MIN_POWER;\r\n\r\n        this._playAudioTrack();\r\n      } else {\r\n        this._soundSource.analyser = analyser(this._soundSource);\r\n        this._soundSource.play();\r\n\r\n        requestAnimationFrame(this._studyAudio.bind(this));\r\n      }\r\n    });\r\n  }\r\n\r\n  _studyAudio() {\r\n    if (!this._studingAudio) {\r\n      return;\r\n    }\r\n\r\n    let frequency = this._getAnalyserFrequencies();\r\n\r\n    if (this._maxFrequency < frequency) {\r\n      this._maxFrequency = frequency;\r\n    }\r\n\r\n    if (this._minFrequency > frequency) {\r\n      this._minFrequency = frequency;\r\n    }\r\n\r\n    requestAnimationFrame(this._studyAudio.bind(this));\r\n  }\r\n\r\n  _playAudioTrack() {\r\n    this._startTime = Date.now();\r\n    this._soundSource.analyser = analyser(this._soundSource);\r\n\r\n    this._soundSource.play();\r\n    this._isPlaying = true;\r\n\r\n    requestAnimationFrame(this._render.bind(this));\r\n  }\r\n\r\n  _onAudioTrackEnded() {\r\n\r\n  }\r\n\r\n  _getAnalysedValue() {\r\n    return this._getAnalyserFrequencies() / this.MAX_POWER;\r\n  }\r\n\r\n  _getAnalyserFrequencies() {\r\n    let freq = this._soundSource.analyser.frequencies();\r\n    let sum = 0;\r\n\r\n    for (let i = 0; i < freq.length; i++) {\r\n      sum += freq[i] + i;\r\n    }\r\n\r\n    sum = sum / freq.length - 1;\r\n    return sum;\r\n  }\r\n\r\n  _drawAudioAnalysis(value) {\r\n    value -= this.SONG_MIN_POWER;\r\n    value = value * 100 / this.SONG_RANGE;\r\n    this._context.clearRect(0, 0, this._width, this._height);\r\n\r\n    let h = this._height / 100 * value;\r\n    let x = this._width / 2 - 50;\r\n    let y = this._height - h;\r\n\r\n    this._context.fillStyle = '#FFFFFF';\r\n    this._context.fillRect(x, y, 100, h);\r\n  }\r\n\r\n  _render() {\r\n    if (this._destroyed) {\r\n      return;\r\n    }\r\n\r\n    this._drawAudioAnalysis(this._getAnalysedValue());\r\n    requestAnimationFrame(this._render.bind(this));\r\n\r\n    // let frequency = 0;\r\n    // let bassFreq = 0;\r\n    // let vocalsFreq = 0;\r\n\r\n    // if (this._isPlaying) {\r\n      // frequency = this._getAnalysedValue();\r\n      // bassFreq = this._getAverageValue(this._soundSources.bass);\r\n      // vocalsFreq = this._getAverageValue(this._soundSources.vocals);\r\n    // }\r\n  }\r\n\r\n  _getMaxAudioPower() {\r\n    let max = 0;\r\n\r\n    for (let i = 0; i < this._frequencyRange; i++) {\r\n      max += MAX_DECIBELS + i;\r\n    }\r\n\r\n    this.MAX_POWER = (max / this._frequencyRange - 1) / 100;\r\n    console.log(`Max audio power = ${this.MAX_POWER}`);\r\n  }\r\n\r\n  _setAudioValues() {\r\n    this.SONG_MIN_POWER = this._minFrequency / this.MAX_POWER;\r\n    this.SONG_MAX_POWER = this._maxFrequency / this.MAX_POWER;\r\n    this.SONG_RANGE = this.SONG_MAX_POWER - this.SONG_MIN_POWER;\r\n\r\n    console.log(`Song min frequency = ${this._minFrequency}`);\r\n    console.log(`Song max frequency = ${this._maxFrequency}`);\r\n    console.log(`Song frequency range = ${this.SONG_RANGE}`);\r\n\r\n    this._studingAudio = false;\r\n    this._loadAudioTrack();\r\n  }\r\n\r\n  showStats() {\r\n    if (!this.stats) {\r\n      this.stats = new Stats();\r\n    }\r\n\r\n    document.body.appendChild(this.stats.dom);\r\n  }\r\n\r\n  hideStats() {\r\n    this.stats.dom.parentNode.removeChild(this.stats.dom);\r\n  }\r\n\r\n  resize(width, height) {\r\n    this._width = width;\r\n    this._height = height;\r\n\r\n    this._element.width = this._width;\r\n    this._element.height = this._height;\r\n  }\r\n\r\n  destroy() {\r\n    this._destroyed = true;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}